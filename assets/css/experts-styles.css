// experts.js
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyB5yIyAhB9fbbaXTW03GRBIuU58XUe1q3E",
        authDomain: "energyconsult-7a837.firebaseapp.com",
        databaseURL: "https://energyconsult-7a837-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "energyconsult-7a837",
        storageBucket: "energyconsult-7a837.appspot.com",
        messagingSenderId: "131060027292",
        appId: "1:131060027292:web:1bf6fe415c06214f5d8259"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    const loadingMessage = document.getElementById('loadingMessage');
    const errorMessage = document.getElementById('errorMessage');
    const expertsContainer = document.getElementById('expertCards');

    function createExpertCard(expert) {
        return `
            <article class="expert-card">
                <h3>${expert.fullName || 'N/A'}</h3>
                <p><strong>Specialization:</strong> ${expert.specialization || 'N/A'}</p>
                <p><strong>Email:</strong> ${expert.email || 'Not provided'}</p>
                <p><strong>Experience:</strong> ${expert.experience || 'N/A'}</p>
                <p><strong>Certifications:</strong> ${expert.certifications || 'N/A'}</p>
                <p><strong>Skills:</strong> ${expert.keySkills || 'N/A'}</p>
                <p><strong>Projects:</strong> ${expert.projects || 'N/A'}</p>
            </article>
        `;
    }

    const expertsRef = ref(database, 'experts');

    onValue(expertsRef, (snapshot) => {
        loadingMessage.style.display = 'none';
        const experts = snapshot.val();

        if (experts) {
            errorMessage.style.display = 'none';
            const expertsArray = Object.values(experts).sort((a, b) =>
                (a.fullName || '').localeCompare(b.fullName || '')
            );

            if (expertsArray.length > 0) {
                expertsContainer.innerHTML = expertsArray.map(createExpertCard).join('');
                expertsContainer.style.display = 'grid';
            } else {
                expertsContainer.style.display = 'none';
                errorMessage.textContent = 'No experts available at the moment.';
                errorMessage.style.display = 'block';
            }
        } else {
            expertsContainer.style.display = 'none';
            errorMessage.textContent = 'No experts available at the moment.';
            errorMessage.style.display = 'block';
        }
    }, (error) => {
        loadingMessage.style.display = 'none';
        errorMessage.textContent = 'Error fetching experts. Please try again later.';
        errorMessage.style.display = 'block';
        console.error("Firebase Error:", error);
    });

    document.getElementById('searchInput').addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const cards = document.querySelectorAll('.expert-card');
        let hasVisibleCards = false;

        cards.forEach(card => {
            const isVisible = card.textContent.toLowerCase().includes(searchTerm);
            card.style.display = isVisible ? 'flex' : 'none';
            if (isVisible) hasVisibleCards = true;
        });

        errorMessage.style.display = !hasVisibleCards && searchTerm ? 'block' : 'none';
        if (!hasVisibleCards && searchTerm) {
            errorMessage.textContent = 'No experts found matching your search.';
        }
    });
</script>

/* styles.css */
<style>
#expertCards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.expert-card {
    background: #4a9eff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    color: #fff;
    animation: fadeIn 0.5s ease-in-out;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.expert-card h3 {
    font-size: 1.5em;
    margin-bottom: 10px;
}

.expert-card p {
    margin: 6px 0;
    line-height: 1.4;
    font-size: 1em;
}

#searchInput {
    padding: 10px;
    font-size: 1em;
    width: 100%;
    max-width: 500px;
    margin: 20px 0;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

#loadingMessage,
#errorMessage {
    text-align: center;
    padding: 15px;
    margin: 20px 0;
    border-radius: 8px;
}

#errorMessage {
    background: #ffecec;
    color: #ff4a4a;
    display: none;
}

#loadingMessage {
    background: #e8f4ff;
    color: #4a9eff;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
